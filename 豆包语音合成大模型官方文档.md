# HTTP 非流式语音合成接口文档  
使用账号申请部分获得的 `appid` 与 `access_token` 进行调用。文本全部合成完毕后，一次性返回全部音频数据（base64 编码）。  

## 1. 接口说明  
- 方法：HTTP POST  
- 地址：openspeech.bytedance.com/api/v1/tts  

## 2. 身份认证  
- 方式：Bearer Token  
- Header：Authorization: Bearer;YourAccessToken  
  > 注意：`Bearer` 与 `token` 之间使用英文分号 `;` 分隔，替换时请勿保留 `${}`。  

## 3. 通用注意事项  
1. 请求与返回均为 JSON 格式。  
2. 音频数据经 base64 编码后嵌于 JSON，需解码得到二进制音频。  
3. 每次合成必须重新生成并保证 reqid 唯一（建议使用 UUID/GUID）。  
4. HTTP 场景下 operation 固定为 query。  
5. Websocket 与 HTTP 调用参数相同，但 Websocket 单条链接仅支持单次合成。  

## 4. 请求参数  

| 字段 | 含义 | 层级 | 格式 | 必需 | 备注 |
|---|---|---|---|---|---|
| **app** | 应用相关配置 | 1 | dict | ✓ | |
| appid | 应用标识 | 2 | string | ✓ | 需提前申请 |
| token | 应用令牌 | 2 | string | ✓ | 无实际鉴权作用，可传任意非空字符串 |
| cluster | 业务集群 | 2 | string | ✓ | 固定值 volcano_tts |
| **user** | 用户相关配置 | 1 | dict | ✓ | |
| uid | 用户标识 | 2 | string | ✓ | 可任意非空，便于日志追溯 |
| **audio** | 音频相关配置 | 1 | dict | ✓ | |
| voice_type | 音色类型 | 2 | string | ✓ | |
| emotion | 音色情感 | 2 | string |  | 部分音色支持，如 "angry" |
| enable_emotion | 开启音色情感 | 2 | bool |  | 需设为 true 才能使用 emotion |
| emotion_scale | 情绪值 | 2 | float |  | 1~5，默认 4 |
| encoding | 音频编码格式 | 2 | string |  | wav / pcm / ogg_opus / mp3，默认 pcm |
| speed_ratio | 语速 | 2 | float |  | [0.8, 2]，默认 1 |
| rate | 采样率 | 2 | int |  | 默认 24000，可选 8000、16000 |
| bitrate | 比特率 | 2 | int |  | kb/s，仅 MP3 生效，默认 160 |
| explicit_language | 明确语种 | 2 | string |  | 见文档枚举 |
| context_language | 参考语种 | 2 | string |  | 西欧语种默认英语 |
| loudness_ratio | 音量调节 | 2 | float |  | [0.5, 2]，默认 1 |
| **request** | 请求相关配置 | 1 | dict | ✓ | |
| reqid | 请求标识 | 2 | string | ✓ | 需唯一 |
| text | 合成文本 | 2 | string | ✓ | ≤1024 字节，建议 <300 字符 |
| model | 模型版本 | 2 | string |  | seed-tts-1.1 或不传 |
| text_type | 文本类型 | 2 | string |  | "ssml" 时使用 SSML |
| silence_duration | 句尾静音 | 2 | float |  | 0~30000 ms，需先启用 enable_trailing_silence_audio |
| with_timestamp | 时间戳 | 2 | int/string |  | 传 1 启用 |
| operation | 操作 | 2 | string | ✓ | query（HTTP 非流式）/ submit（流式） |
| extra_param | 附加参数 | 2 | jsonstring |  | JSON 字符串，子字段见下 |

### extra_param 子字段（JSON 字符串）
- disable_markdown_filter: bool（true 时过滤 markdown 语法）  
- enable_latex_tn: bool（true 时支持朗读 LaTeX，需先 disable_markdown_filter=true）  
- mute_cut_threshold & mute_cut_remain_ms: string（静音阈值与保留长度）  
- disable_emoji_filter: bool（true 时不过滤 emoji）  
- unsupported_char_ratio_thresh: float（不支持的字符占比阈值，默认 0.3）  
- cache_config: dict（开启缓存，示例 {"text_type":1,"use_cache":true}）

## 5. 返回参数  

| 字段 | 含义 | 层级 | 格式 | 备注 |
|---|---|---|---|---|
| reqid | 请求 ID | 1 | string | 与请求一致 |
| code | 状态码 | 1 | int | 见错误码表 |
| message | 状态信息 | 1 | string | |
| sequence | 音频段序号 | 1 | int | 负数表示合成完毕 |
| data | 音频数据 | 1 | string | base64 编码 |
| addition | 额外信息父节点 | 1 | string | |
| duration | 音频时长 | 2 | string | 单位 ms |

## 6. 请求示例  

```json
{
  "app": { "appid": "appid123", "token": "access_token", "cluster": "volcano_tts" },
  "user": { "uid": "uid123" },
  "audio": {
    "voice_type": "zh_male_M392_conversation_wvae_bigtts",
    "encoding": "mp3",
    "speed_ratio": 1.0
  },
  "request": {
    "reqid": "uuid",
    "text": "字节跳动语音合成",
    "operation": "query"
  }
}

7. 响应示例

{
  "reqid": "reqid",
  "code": 3000,
  "operation": "query",
  "message": "Success",
  "sequence": -1,
  "data": "base64 encoded binary data",
  "addition": { "duration": "1960" }
}